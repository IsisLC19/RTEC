<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configurações - RTEC</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    darkMode: 'class', // <-- Esta é a linha mais importante
    theme: {
      extend: {
        // (Você pode adicionar cores, etc. aqui no futuro)
      }
    }
  }
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="icon" href="img/logo.png" type="image/x-icon">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    body {
        font-family: 'Inter', sans-serif;
        box-sizing: border-box;
        /* Default light mode background set via Tailwind class */
    }

    .nav-link:hover {
        color: #10b981;
        transform: translateY(-1px);
    }

    .filter-active {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white !important;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    .filter-inactive:hover {
        background-color: #f3f4f6; /* gray-100 */
    }
    /* ATUALIZADO: Hover inativo dark mode */
    .dark .filter-inactive:hover {
        background-color: #374151; /* dark:bg-gray-700 */
    }

    /* Estilos do Menu Mobile */
    #mobile-menu { position: fixed; top: 0; right: 0; width: 80%; max-width: 300px; height: 100vh; background-color: rgba(255, 255, 255, 0.98); backdrop-filter: blur(8px); box-shadow: -8px 0 20px rgba(0,0,0,0.2); transform: translateX(100%); transition: transform 0.4s ease-out; z-index: 100; display: flex; flex-direction: column; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark #mobile-menu {
        background-color: rgba(31, 41, 55, 0.98); /* dark:bg-gray-800/98 */
        border-left: 1px solid #374151; /* dark:border-gray-700 */
    }

    #mobile-menu.active { transform: translateX(0); }
    #mobile-menu-header { padding: 1rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e5e7eb; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark #mobile-menu-header {
        border-bottom-color: #374151; /* dark:border-gray-700 */
    }

    #mobile-menu .nav-list-mobile { padding: 1.5rem 1rem; flex-grow: 1; }
    #mobile-menu .nav-list-mobile li a { display: block; padding: 0.75rem 1rem; margin-bottom: 0.5rem; font-size: 1.1rem; font-weight: 500; color: #374151; border-radius: 0.5rem; transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease; position: relative; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark #mobile-menu .nav-list-mobile li a {
        color: #d1d5db; /* dark:text-gray-300 */
    }

    #mobile-menu .nav-list-mobile li a:hover { background-color: #ecfdf5; color: #047857; transform: translateX(5px); }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark #mobile-menu .nav-list-mobile li a:hover {
        background-color: #374151; /* dark:bg-gray-700 */
        color: #34d399; /* dark:text-green-400 */
    }

    #mobile-menu .nav-list-mobile li .active-link-mobile { background-color: #d1fae5; color: #047857; font-weight: 700; border-left: 4px solid #10b981; padding-left: 1rem; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark #mobile-menu .nav-list-mobile li .active-link-mobile {
        background-color: #065f46; /* dark:bg-green-800 */
        color: #6ee7b7; /* dark:text-green-300 */
        border-left-color: #10b981;
    }

    .mobile-menu-footer { padding: 1rem; margin-top: auto; border-top: 1px solid #e5e7eb; background-color: #f9fafb; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark .mobile-menu-footer {
        border-top-color: #374151; /* dark:border-gray-700 */
        background-color: #1f2937; /* dark:bg-gray-800 */
    }

    .mobile-menu-footer .btn-mobile-login { display: block; width: 100%; text-align: center; padding: 0.75rem 1rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.2s ease; }
    .btn-mobile-logout { background-color: #fee2e2; color: #b91c1c; margin-top: 0.5rem; }
    .btn-mobile-logout:hover { background-color: #fecaca; color: #991b1b; }
    /* ATUALIZADO: Menu Mobile Dark Mode */
    .dark .btn-mobile-logout {
        background-color: #450a0a; /* dark:bg-red-900 */
        color: #fca5a5; /* dark:text-red-300 */
    }
     .dark .btn-mobile-logout:hover {
        background-color: #7f1d1d; /* dark:hover:bg-red-800 */
        color: #fecaca; /* dark:hover:text-red-200 */
    }


    /* Estilos para listas gerenciáveis */
    .managed-list li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem;
        background-color: #f9fafb; /* gray-50 */
        border: 1px solid #e5e7eb; /* border-gray-200 */
        border-radius: 0.5rem;
    }
    /* ATUALIZADO: Listas gerenciáveis Dark Mode */
    .dark .managed-list li {
        background-color: #374151; /* dark:bg-gray-700 */
        border-color: #4b5563; /* dark:border-gray-600 */
        color: #d1d5db; /* dark:text-gray-300 */
    }

    .remove-btn {
        background: none;
        border: none;
        color: #ef4444; /* red-500 */
        cursor: pointer;
        transition: color 0.2s;
    }
    .remove-btn:hover { color: #b91c1c; /* red-700 */}
    /* ATUALIZADO: Remove Button Dark Mode */
    .dark .remove-btn {
        color: #fca5a5; /* dark:text-red-300 */
    }
    .dark .remove-btn:hover {
        color: #fda4af; /* dark:hover:text-red-400 */
    }


    /* Toggle Switch */
    .toggle-bg:after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        background: white;
        width: 1.25rem; /* h-5 */
        height: 1.25rem; /* w-5 */
        border-radius: 50%;
        transition: all 0.3s;
    }
    input:checked + .toggle-bg:after {
        transform: translateX(100%);
    }
    input:checked + .toggle-bg {
        background-color: #10b981; /* green-500 */
    }
    /* ATUALIZADO: Toggle Switch Dark Mode */
    .dark .toggle-bg {
        background-color: #4b5563; /* dark:bg-gray-600 */
    }
    .dark input:checked + .toggle-bg {
        background-color: #10b981; /* dark:checked:bg-green-500 */
    }

</style>
<script>
    // Este script aplica o tema (claro ou escuro) antes mesmo da página carregar
    if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.classList.add('dark');
    } else {
        document.documentElement.classList.remove('dark');
    }
</script>
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900">
     <!-- Leitor em Libras-->
    <div vw="httpsAcess" class="enabled">
      <div vw-access-button class="active"></div>
      <div vw-plugin-wrapper>
        <div class="vw-plugin-top-wrapper"></div>
      </div>
    </div>
     <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>

<header class="bg-white dark:bg-gray-800 shadow-lg relative z-50">
<nav class="bg-gray-100 dark:bg-gray-700 py-2">
    <div class="container mx-auto px-4 flex justify-end items-center space-x-4">
        <button id="theme-toggle-button" aria-label="Toggle light/dark theme" class="text-gray-600 dark:text-gray-300 hover:text-green-600 dark:hover:text-green-400 focus:outline-none transition-colors duration-200 text-lg">
            <i class="fas fa-sun" id="theme-toggle-icon"></i>
        </button>
        <div class="relative inline-block" id="profileDropdownContainer">
            <img src="img/usuario.png" alt="Usuário" id="profileButton" class="h-10 w-10 rounded-full object-cover cursor-pointer border-2 border-green-600 hover:border-green-800 transition" onclick="toggleProfileDropdown()">
            <div id="profileDropdown" class="absolute right-0 mt-2 w-48 rounded-lg shadow-xl bg-white dark:bg-gray-700 ring-1 ring-black dark:ring-gray-600 ring-opacity-5 z-50 hidden">
                <div class="py-1">
                    <p class="px-4 py-2 text-sm text-gray-700 dark:text-gray-200 font-semibold border-b dark:border-gray-600">Nome do Usuário</p>
                    <a href="#" id="dropdown-link-1" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"><i class="fas fa-desktop mr-2"></i>Monitor</a>
                    <a href="#" id="dropdown-link-2" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600"><i class="fas fa-file-alt mr-2"></i>Relatórios</a>
                    <a href="configuracoes.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-green-400 bg-gray-100 dark:bg-gray-600 font-medium"><i class="fas fa-cog mr-2"></i>Configurações</a>
                    <a href="#" onclick="fazerLogout(event)" class="block px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 hover:text-red-700 dark:hover:text-red-300 border-t dark:border-gray-600 mt-1"><i class="fas fa-sign-out-alt mr-2"></i>Sair</a>
                </div>
            </div>
        </div>
    </div>
</nav>
<nav class="py-4">
    <div class="container mx-auto px-4 flex items-center justify-between">
        <a href="sobre.html" class="block"><img src="img/logo.png" alt="Logo" class="h-12 w-auto"></a>
        <ul class="hidden md:flex space-x-8" id="main-nav-links">
            </ul>
        <button id="menu-btn" class="md:hidden text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-300 focus:outline-none p-2 rounded-md transition-colors duration-200 hover:bg-green-50 dark:hover:bg-gray-700">
            <i class="fas fa-bars fa-xl"></i>
        </button>
    </div>
</nav>
</header>

<div id="mobile-menu" class="hidden">
<div id="mobile-menu-header">
    <img src="img/logo.png" alt="Logo RTEC" class="h-10 w-auto">
    <button id="close-menu-btn" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white focus:outline-none w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
        <i class="fas fa-times fa-lg"></i>
    </button>
</div>
<ul class="nav-list-mobile" id="mobile-nav-links">
    </ul>
<div class="mobile-menu-footer">
    <a href="#" onclick="fazerLogout(event); window.closeMobileMenu();" class="btn-mobile-login btn-mobile-logout"><i class="fas fa-sign-out-alt mr-2"></i>Sair</a>
</div>
</div>

<div id="menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[99] hidden"></div>

    <main class="py-12 sm:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-2">Configurações</h1>
                <p class="text-lg sm:text-xl text-gray-600 dark:text-gray-300">Gerencie seu perfil e as preferências do sistema</p>
            </div>

            <div class="flex flex-col sm:flex-row gap-2 justify-center items-center md:items-stretch mb-10 px-4">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-2 shadow-md w-full md:w-auto">
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <button onclick="showSection('perfil')" id="perfilTab" class="tab-button filter-inactive filter-active flex-1 px-4 py-2 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center text-sm"><i class="fas fa-user-cog mr-2"></i>Perfil</button>
                        <button onclick="showSection('sistema')" id="sistemaTab" class="tab-button filter-inactive flex-1 px-4 py-2 rounded-lg font-semibold text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 transition-all duration-300 flex items-center justify-center text-sm hidden"><i class="fas fa-cogs mr-2"></i>Sistema</button>
                        <button onclick="showSection('monitoria')" id="monitoriaTab" class="tab-button filter-inactive flex-1 px-4 py-2 rounded-lg font-semibold text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 transition-all duration-300 flex items-center justify-center text-sm hidden"><i class="fas fa-desktop mr-2"></i>Monitoria</button>
                        <button onclick="showSection('notificacoes')" id="notificacoesTab" class="tab-button filter-inactive flex-1 px-4 py-2 rounded-lg font-semibold text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-300 transition-all duration-300 flex items-center justify-center text-sm"><i class="fas fa-bell mr-2"></i>Notificações</button>
                    </div>
                </div>
            </div>

            <div id="perfilSection" class="settings-section grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-user-edit mr-2 text-green-600 dark:text-green-400"></i>Alterar Dados Pessoais</h3>
                    <form class="space-y-4">
                        <div>
                            <label for="nome" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nome</label>
                            <input type="text" id="nome" value="Nome do Usuário" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">E-mail</label>
                            <input type="email" id="email" value="usuario@email.com" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold transition-all duration-300"><i class="fas fa-save mr-2"></i>Salvar Alterações</button>
                    </form>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-key mr-2 text-green-600 dark:text-green-400"></i>Alterar Senha</h3>
                    <form class="space-y-4">
                        <div>
                            <label for="senha-atual" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Senha Atual</label>
                            <input type="password" id="senha-atual" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <div>
                            <label for="nova-senha" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nova Senha</label>
                            <input type="password" id="nova-senha" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <div>
                            <label for="confirmar-senha" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Confirmar Nova Senha</label>
                            <input type="password" id="confirmar-senha" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all duration-300"><i class="fas fa-shield-alt mr-2"></i>Atualizar Senha</button>
                    </form>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8 lg:col-span-2">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-image mr-2 text-green-600 dark:text-green-400"></i>Alterar Foto de Perfil</h3>
                            <div class="flex items-center space-x-4">
                                <img src="img/usuario.png" alt="Usuário" class="h-20 w-20 rounded-full object-cover border-4 border-green-500">
                                <input type="file" class="text-sm text-gray-600 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 dark:file:bg-gray-700 file:text-green-700 dark:file:text-green-300 hover:file:bg-green-100 dark:hover:file:bg-gray-600">
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-palette mr-2 text-green-600 dark:text-green-400"></i>Aparência</h3>
                            <div class="flex items-center justify-between bg-gray-100 dark:bg-gray-700 p-4 rounded-lg">
                                <span class="font-medium text-gray-700 dark:text-gray-200">Modo Escuro</span>
                                <label for="themeToggle" class="cursor-pointer">
                                    <input type="checkbox" id="themeToggle" class="hidden">
                                    <div class="w-10 h-6 bg-gray-300 rounded-full flex items-center p-1 toggle-bg">
                                        </div>
                                </label>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">O Modo Escuro será aplicado em sua próxima visita.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sistemaSection" class="settings-section hidden grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-users-cog mr-2 text-green-600 dark:text-green-400"></i>Gerenciamento de Usuários</h3>
                    <ul class="space-y-3 mb-4 managed-list">
                        <li><span>monitor@gmail.com (Monitor)</span> <button class="remove-btn"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>outro@gmail.com (Funcionário)</span> <button class="remove-btn"><i class="fas fa-trash-alt"></i></button></li>
                    </ul>
                    <button class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-bold transition-all duration-300"><i class="fas fa-user-plus mr-2"></i>Adicionar Novo Usuário</button>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-map-marker-alt mr-2 text-green-600 dark:text-green-400"></i>Gestão da Coleta</h3>
                    <form class="space-y-4">
                        <div>
                            <label for="endereco-coleta" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Endereço de Coleta (para Agendamento.html)</label>
                            <input type="text" id="endereco-coleta" value="Rodovia Luiz Salomão Chama, 240 - Vila Ramos, Franco da Rocha - SP - CEP: 07857-050" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="horario-inicio" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horário Início</label>
                                <input type="time" id="horario-inicio" value="09:00" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none" style="color-scheme: dark;">
                            </div>
                             <div>
                                <label for="horario-fim" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Horário Fim</label>
                                <input type="time" id="horario-fim" value="17:00" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none" style="color-scheme: dark;">
                            </div>
                        </div>
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all duration-300"><i class="fas fa-save mr-2"></i>Salvar Endereço/Horários</button>
                    </form>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8 lg:col-span-2">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-edit mr-2 text-green-600 dark:text-green-400"></i>Tipos de Resíduos (Pág. Agendamento)</h3>
                    <ul id="listaResiduos" class="space-y-3 mb-4 managed-list">
                        <li><span>Eletrônico</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Reciclável</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                    </ul>
                    <form class="flex gap-4" id="formResiduos">
                        <input type="text" id="inputResiduo" placeholder="Novo tipo de resíduo" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300"><i class="fas fa-plus"></i></button>
                    </form>
                </div>
            </div>

            <div id="monitoriaSection" class="settings-section hidden grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-boxes mr-2 text-green-600 dark:text-green-400"></i>Tipos de Materiais</h3>
                    <ul id="listaMateriais" class="space-y-3 mb-4 managed-list max-h-60 overflow-y-auto pr-2">
                        <li><span>CPU</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Celulares</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Placa-mãe</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>HD</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Fonte de alimentação</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Memória RAM</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        </ul>
                    <form class="flex gap-4" id="formMateriais">
                        <input type="text" id="inputMaterial" placeholder="Novo material" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300"><i class="fas fa-plus"></i></button>
                    </form>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-exclamation-triangle mr-2 text-green-600 dark:text-green-400"></i>Possíveis Problemas</h3>
                    <ul id="listaProblemas" class="space-y-3 mb-4 managed-list max-h-60 overflow-y-auto pr-2">
                        <li><span>Bateria viciada</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Tela danificada</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Problemas de software</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Falha de hardware</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Equipamento obsoleto</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Dano físico</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                    </ul>
                    <form class="flex gap-4" id="formProblemas">
                        <input type="text" id="inputProblema" placeholder="Novo problema" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300"><i class="fas fa-plus"></i></button>
                    </form>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-map-signs mr-2 text-green-600 dark:text-green-400"></i>Destinos Finais</h3>
                    <ul id="listaDestinos" class="space-y-3 mb-4 managed-list max-h-60 overflow-y-auto pr-2">
                        <li><span>Para Coleta</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                        <li><span>Para Aula</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button></li>
                    </ul>
                    <form class="flex gap-4" id="formDestinos">
                        <input type="text" id="inputDestino" placeholder="Novo destino" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-green-500 focus:outline-none">
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg font-bold transition-all duration-300"><i class="fas fa-plus"></i></button>
                    </form>
                </div>
            </div>

            <div id="notificacoesSection" class="settings-section hidden max-w-2xl mx-auto">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-gray-100 mb-6 border-b dark:border-gray-700 pb-4"><i class="fas fa-bell mr-2 text-green-600 dark:text-green-400"></i>Gerenciar Notificações</h3>

                    <div class="space-y-4">
                        <div id="notificacoesFuncionario" class="hidden space-y-3">
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <label for="notif-agendamento" class="font-medium text-gray-700 dark:text-gray-200 cursor-pointer">Novo agendamento feito</label>
                                <input type="checkbox" id="notif-agendamento" class="h-5 w-5 text-green-600 rounded border-gray-300 dark:border-gray-500 focus:ring-green-500 dark:bg-gray-600 dark:focus:ring-offset-gray-800">
                            </div>
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <label for="notif-feedback" class="font-medium text-gray-700 dark:text-gray-200 cursor-pointer">Novo feedback recebido</label>
                                <input type="checkbox" id="notif-feedback" class="h-5 w-5 text-green-600 rounded border-gray-300 dark:border-gray-500 focus:ring-green-500 dark:bg-gray-600 dark:focus:ring-offset-gray-800" checked>
                            </div>
                        </div>

                        <div id="notificacoesMonitor" class="hidden space-y-3">
                            <div class="flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                                <label for="notif-material" class="font-medium text-gray-700 dark:text-gray-200 cursor-pointer">Novo material cadastrado</label>
                                <input type="checkbox" id="notif-material" class="h-5 w-5 text-green-600 rounded border-gray-300 dark:border-gray-500 focus:ring-green-500 dark:bg-gray-600 dark:focus:ring-offset-gray-800" checked>
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold transition-all duration-300 mt-6"><i class="fas fa-save mr-2"></i>Salvar Preferências</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // === CONTROLE DE ABAS ===
        function showSection(sectionId) {
            // Esconde todas as seções
            document.querySelectorAll('.settings-section').forEach(section => {
                section.classList.add('hidden');
            });
            // Desativa todas as abas
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('filter-active');
                tab.classList.add('filter-inactive', 'text-gray-600', 'bg-gray-100', 'dark:bg-gray-700', 'dark:text-gray-300'); // Added dark mode classes
            });

            // Mostra a seção clicada
            document.getElementById(sectionId + 'Section').classList.remove('hidden');

            // Ativa a aba clicada
            const activeTab = document.getElementById(sectionId + 'Tab');
            activeTab.classList.add('filter-active');
            activeTab.classList.remove('filter-inactive', 'text-gray-600', 'bg-gray-100', 'dark:bg-gray-700', 'dark:text-gray-300'); // Removed dark mode classes
        }

        // === LÓGICA DE GERENCIAMENTO DE LISTAS ===
        function setupListManagement(formId, inputId, listId) {
            const form = document.getElementById(formId);
            const input = document.getElementById(inputId);
            const list = document.getElementById(listId);

            if (!form || !input || !list) {
                console.error(`Error setting up list management for: ${formId}`);
                return;
            }

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const value = input.value.trim();
                if (value) {
                    const li = document.createElement('li');
                    // Ensure dark mode classes are applied here if needed inside the list item structure
                    li.innerHTML = `<span>${value}</span> <button class="remove-btn" onclick="this.parentElement.remove()"><i class="fas fa-trash-alt"></i></button>`;
                    list.appendChild(li);
                    input.value = '';
                }
            });
        }

        // === INICIALIZAÇÃO DA PÁGINA ===
        document.addEventListener('DOMContentLoaded', () => {

            // Simula a verificação de login.
            const userRole = localStorage.getItem("userRole") || 'monitor'; // Padrão para 'monitor'

            // 1. Configurar UI baseada na Role
            const mainNav = document.getElementById('main-nav-links');
            const mobileNav = document.getElementById('mobile-nav-links');
            const dropdownLink1 = document.getElementById('dropdown-link-1');
            const dropdownLink2 = document.getElementById('dropdown-link-2');

            if (userRole === 'funcionario') {
                document.getElementById('sistemaTab').classList.remove('hidden');
                document.getElementById('notificacoesFuncionario').classList.remove('hidden');

                mainNav.innerHTML = `
                    <li><a href="coletores.html" class="nav-link text-gray-700 dark:text-gray-300 font-medium hover:text-green-600 dark:hover:text-green-400">DASHBOARD</a></li>
                    <li><a href="funcionario.html" class="nav-link text-gray-700 dark:text-gray-300 font-medium hover:text-green-600 dark:hover:text-green-400">RELATÓRIOS</a></li>
                    <li><a href="configuracoes.html" class="nav-link text-green-600 dark:text-green-400 font-medium border-b-2 border-green-600">CONFIGURAÇÕES</a></li>
                `;
                mobileNav.innerHTML = `
                    <li><a href="coletores.html">DASHBOARD</a></li>
                    <li><a href="funcionario.html">RELATÓRIOS</a></li>
                    <li><a href="configuracoes.html" class="active-link-mobile">CONFIGURAÇÕES</a></li>
                `;
                dropdownLink1.href = "coletores.html";
                dropdownLink1.innerHTML = '<i class="fas fa-chart-line mr-2"></i>Dashboard';
                dropdownLink2.href = "funcionario.html";
                dropdownLink2.innerHTML = '<i class="fas fa-file-alt mr-2"></i>Relatórios';

            } else { // Monitor
                document.getElementById('monitoriaTab').classList.remove('hidden');
                document.getElementById('notificacoesMonitor').classList.remove('hidden');

                mainNav.innerHTML = `
                    <li><a href="monitoria.html" class="nav-link text-gray-700 dark:text-gray-300 font-medium hover:text-green-600 dark:hover:text-green-400">MONITOR</a></li>
                    <li><a href="relatorios.html" class="nav-link text-gray-700 dark:text-gray-300 font-medium hover:text-green-600 dark:hover:text-green-400">RELATÓRIOS</a></li>
                    <li><a href="configuracoes.html" class="nav-link text-green-600 dark:text-green-400 font-medium border-b-2 border-green-600">CONFIGURAÇÕES</a></li>
                `;
                mobileNav.innerHTML = `
                    <li><a href="monitoria.html">MONITOR</a></li>
                    <li><a href="relatorios.html">RELATÓRIOS</a></li>
                    <li><a href="configuracoes.html" class="active-link-mobile">CONFIGURAÇÕES</a></li>
                `;
                dropdownLink1.href = "monitoria.html";
                dropdownLink1.innerHTML = '<i class="fas fa-desktop mr-2"></i>Monitor';
                dropdownLink2.href = "relatorios.html";
                dropdownLink2.innerHTML = '<i class="fas fa-file-alt mr-2"></i>Relatórios';
            }

            // 2. Configurar a aba inicial
            showSection('perfil');

            // 3. Ativar gerenciamento de listas
            setupListManagement('formResiduos', 'inputResiduo', 'listaResiduos');
            setupListManagement('formMateriais', 'inputMaterial', 'listaMateriais');
            setupListManagement('formProblemas', 'inputProblema', 'listaProblemas');
            setupListManagement('formDestinos', 'inputDestino', 'listaDestinos');

            // 4. Ativar Toggle de Tema (FUNCIONAL)
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                if (localStorage.getItem('theme') === 'dark') {
                    themeToggle.checked = true;
                }

                themeToggle.addEventListener('change', function() {
                    if (this.checked) {
                        console.log("Modo Escuro Ativado");
                        localStorage.setItem('theme', 'dark');
                        document.documentElement.classList.add('dark');
                    } else {
                        console.log("Modo Claro Ativado");
                        localStorage.setItem('theme', 'light');
                        document.documentElement.classList.remove('dark');
                    }
                });
            } else {
                 console.error("Theme toggle button not found");
            }

            // --- Script do Menu Mobile (integrado no DOMContentLoaded) ---
            const menuBtn = document.getElementById('menu-btn');
            const closeMenuBtn = document.getElementById('close-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuOverlay = document.getElementById('menu-overlay');

            window.closeMobileMenu = () => {
                 if (!mobileMenu || !menuOverlay) return;
                mobileMenu.classList.remove('active');
                mobileMenu.addEventListener('transitionend', () => {
                    if (!mobileMenu.classList.contains('active')) {
                        mobileMenu.classList.add('hidden');
                    }
                }, { once: true });
                menuOverlay.classList.add('hidden');
                document.body.style.overflow = '';
                const menuIcon = menuBtn ? menuBtn.querySelector('i') : null;
                if(menuIcon) {
                  menuIcon.classList.remove('fa-times');
                  menuIcon.classList.add('fa-bars');
                }
            };

            if (menuBtn && mobileMenu && closeMenuBtn && menuOverlay) {
                const menuIcon = menuBtn.querySelector('i');
                const openMobileMenu = () => {
                    mobileMenu.classList.remove('hidden');
                    setTimeout(() => mobileMenu.classList.add('active'), 10);
                    menuOverlay.classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                    if(menuIcon) {
                      menuIcon.classList.remove('fa-bars');
                      menuIcon.classList.add('fa-times');
                    }
                };

                menuBtn.addEventListener('click', () => {
                   if (mobileMenu.classList.contains('hidden') || !mobileMenu.classList.contains('active')) {
                       openMobileMenu();
                   } else {
                       window.closeMobileMenu();
                   }
                });
                closeMenuBtn.addEventListener('click', window.closeMobileMenu);
                menuOverlay.addEventListener('click', window.closeMobileMenu);

            } else {
                console.error("Erro: Elementos do menu mobile não encontrados.");
            }

             // Fechar dropdown ao clicar fora
            document.addEventListener('click', (e) => {
                const container = document.getElementById('profileDropdownContainer');
                const dropdown = document.getElementById('profileDropdown');
                if (container && dropdown && !container.contains(e.target) && !dropdown.classList.contains('hidden')) {
                    dropdown.classList.add('hidden');
                }
            });


        }); // Fim do DOMContentLoaded principal


        // --- Funções do Dropdown de Perfil ---
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            if (dropdown) dropdown.classList.toggle('hidden');
        }
        function fazerLogout(event) {
            event.preventDefault();
            localStorage.removeItem('userToken');
            localStorage.removeItem('userRole'); // Limpar a role
            sessionStorage.removeItem('userData');
            alert('Sessão encerrada com sucesso.');
            window.location.href = 'entrar.html';
        }

    </script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggleButton = document.getElementById('theme-toggle-button');
        const themeToggleIcon = document.getElementById('theme-toggle-icon');

        // Função para atualizar o ícone baseado no tema atual
        const updateButtonIcon = () => {
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                // Se dark mode ativo (ou preferência do sistema), mostra a LUA
                if (themeToggleIcon) themeToggleIcon.className = 'fas fa-moon';
            } else {
                // Se light mode ativo, mostra o SOL
                if (themeToggleIcon) themeToggleIcon.className = 'fas fa-sun';
            }
        };

        // Atualiza o ícone ao carregar a página
        updateButtonIcon();

        // Adiciona o listener de clique ao botão
        if (themeToggleButton) {
            themeToggleButton.addEventListener('click', () => {
                // Verifica se o modo escuro está ATIVO atualmente
                const isDarkMode = document.documentElement.classList.toggle('dark');

                // Salva a preferência no localStorage
                if (isDarkMode) {
                    localStorage.setItem('theme', 'dark');
                } else {
                    localStorage.setItem('theme', 'light');
                }

                // Atualiza o ícone do botão
                updateButtonIcon();

                // --- Sincronização Extra para a página de Configurações ---
                // Se existir o switch na página config, atualiza ele também
                const themeSwitch = document.getElementById('themeToggle');
                if(themeSwitch) {
                    themeSwitch.checked = isDarkMode;
                }
                // --- Fim da Sincronização ---
            });
        }

        // --- Sincronização Extra (se o switch for mudado) ---
        // Ouve mudanças no switch da página de configurações, se existir
        const themeSwitch = document.getElementById('themeToggle');
        if (themeSwitch) {
            themeSwitch.addEventListener('change', () => {
                // A lógica do switch já atualiza o localStorage e a classe HTML
                // Apenas precisamos garantir que o botão do header reflete a mudança
                updateButtonIcon();
            });
        }
         // --- Fim da Sincronização ---

        // (Cole aqui o restante do seu script JS que estava dentro do DOMContentLoaded,
        // como a inicialização do menu mobile, chatbot, etc.)
        // Exemplo:
        // const menuBtn = document.getElementById('menu-btn');
        // ... (resto do seu código JS específico da página)

    }); // Fim do DOMContentLoaded
</script>
</body>
</html>
